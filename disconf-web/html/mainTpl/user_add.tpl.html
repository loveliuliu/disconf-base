<%= page.basehead %>
<title>Disconf - 分布式配置管理平台</title>
<%= page.head %>

<div id="Wrapper" class="clearfix">
    <div id="Main" style="margin-top:50px;">
        <div class="container-fluid" ng-app="myApp" ng-controller="validateCtrl">

            <div class="row-fluid">
                <ul class="breadcrumb" style="background-color:#fff;">
                    <li>
                        <a href="/admin_users.html">用户管理</a>
                    </li>
                    <li class="active">
                        / {{title}}
                    </li>

                </ul>
            </div>

            <div class="row-fluid">

                <div class="span12">

                    <div class="content oz">
                        <form  ng-submit="submitForm(myForm.$valid)"
                               name="myForm" novalidate class="private-form clearfix">
                            <h2 class="autoPush-detail-title">{{title}}</h2>

                            <div class="private-item">
                                <span class="private-item-key">用户名：</span>
                                <input type="hidden" name="id" ng-model="user.id" value="{{user.id}}">
                                <input class="private-item-value" type="text" name="name" ng-model="user.name" ng-maxlength="25" required>
                                <span style="color:red" ng-show="myForm.name.$dirty && myForm.name.$invalid">
                                    <span ng-show="myForm.name.$error.required">用户名是必须的。</span>
                                    <span ng-show="myForm.name.$error.maxlength">用户名不能超过25字符。</span>
                                </span>
                            </div>

                            <div class="private-item">
                                <span class="private-item-key">角色：</span>
                                <select name="roleId" ng-model="roleId" required>
                                    <option value="">--请选择--</option>
                                    <option ng-repeat="r in roles" value="{{r.id}}">{{r.roleName}}</option>
                                </select>
                                <span style="color:red" ng-show="myForm.roleId.$dirty && myForm.roleId.$invalid">
                                    <span ng-show="myForm.roleId.$error.required">请选择用户角色。</span>
                                </span>
                            </div>

                            <div class="private-item">
                                <span class="private-item-key">Email：</span>
                                <input class="private-item-value" type="email" name="email" ng-model="user.email">
                                <span style="color:red" ng-show="myForm.email.$dirty && myForm.email.$invalid">
                                     <span ng-show="myForm.email.$error.email">非法的邮箱。</span>
                                </span>
                            </div>

                            <div class="private-item">
                                <span class="private-item-key">手机号：</span>
                                <input class="private-item-value" type="text" name="phone" ng-model="user.phone" ng-pattern="/^1[3|4|5|7|8]\d{9}$/">
                                <span style="color:red" ng-show="myForm.phone.$dirty && myForm.phone.$invalid" >
                                     <span ng-show="myForm.phone.$error.pattern">非法的手机号。</span>
                                </span>
                            </div>

                            <div class="private-item" style="text-align:center">
                                <input type="submit" value="保存" ng-disabled="myForm.$invalid" class="btn btn-primary"/>
                                <input type="button" onclick="history.go(-1);" value="返回" class="btn btn-warning"/>
                            </div>

                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<%= page.foot %>
<script src="assets/js/user_add.js"></script>

<%= page.basefoot %>
